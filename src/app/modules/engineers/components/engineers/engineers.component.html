<ngx-loading-bar color="#b21616" [includeSpinner]="false" height="3px"></ngx-loading-bar>

<div class="container my-5 pb-5">
  <header>
    <h1 class="display-5 fw-bold">Hire Angular developers</h1>
    <div class="d-flex justify-content-between align-items-center head">
      <article>
        800+ Angular developers looking for their next gig. Juniors to seniors and <br>
        everyone in between, you'll find them all here.
      </article>
      <div class="sort">Sort</div>
    </div>
  </header>
  <div class="row">
    <!-- Filters -->
    <div class="col-xs-12 col-lg-3">
      <nav>
        <div class="accordion custom-box-shadow" id="accordionPanelsStayOpenExample">
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse"
                data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                aria-controls="panelsStayOpen-collapseOne">
                Role level
              </button>
            </h2>
            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
              aria-labelledby="panelsStayOpen-headingOne">
              <div class="accordion-body">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="junior">
                  <label class="form-check-label" for="junior">
                    Junior
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="midlevel">
                  <label class="form-check-label" for="midlevel">
                    Mid-level
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="senior">
                  <label class="form-check-label" for="senior">
                    Senior
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="principal">
                  <label class="form-check-label" for="principal">
                    Principal / staff
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="clevel">
                  <label class="form-check-label" for="clevel">
                    C-level
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
              <button class="accordion-button" type="button" data-bs-toggle="collapse"
                data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                aria-controls="panelsStayOpen-collapseTwo">
                Work preference
              </button>
            </h2>
            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show"
              aria-labelledby="panelsStayOpen-headingTwo">
              <div class="accordion-body">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="parttime">
                  <label class="form-check-label" for="parttime">
                    Part-time contract
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="fulltime-contract">
                  <label class="form-check-label" for="fulltime-contract">
                    Full-time contract
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="fulltime-employment">
                  <label class="form-check-label" for="fulltime-employment">
                    Full-time employment
                  </label>
                </div>
                <div class="form-check border-top mt-2 py-2">
                  <input class="form-check-input" type="checkbox" value="" id="fulltime-employment">
                  <label class="form-check-label" for="fulltime-employment">
                    Include developers not currently interested
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingThree">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                aria-controls="panelsStayOpen-collapseThree">
                Location
              </button>
            </h2>
            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse"
              aria-labelledby="panelsStayOpen-headingThree">
              <div class="accordion-body">
                <div class="form-check p-0">
                  <div class="ng-autocomplete w-100">
                    <ng-autocomplete
                      [data]="data"
                      [searchKeyword]="keyword"
                      placeholder="Select country"
                      (selected)='selectEvent($event)'
                      [itemTemplate]="itemTemplate"
                      [notFoundTemplate]="notFoundTemplate">
                    </ng-autocomplete>

                    <ng-template #itemTemplate let-item>
                      <div class="d-flex align-items-center px-3">
                        <img [src]="item.flag" width="30px" height="20px"/>
                        <a [innerHTML]="item.name"></a>
                      </div>
                    </ng-template>

                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                    </div>
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingFour">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                aria-controls="panelsStayOpen-collapseThree">
                Timezone
              </button>
            </h2>
            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse"
              aria-labelledby="panelsStayOpen-headingFour">
              <div class="accordion-body">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="gmt+1">
                  <label class="form-check-label" for="gmt+1">
                    GMT+1
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-white p-4 borderbtm">
            <button class="btn btn-outline-secondary">Clear</button>
            <button class="btn btn-outline-success mx-3" (click)="applyFilter()">Apply</button>
          </div>
        </div>
      </nav>
    </div>
    <!-- End of filters -->

    <!-- List of engineers -->
    <div class="col-xs-12 col-lg-9">
      <main>
        <div class="engineer-wrapper">
          <div *ngFor="let engineer of engineers
          | paginate: { itemsPerPage: limit, currentPage: page, totalItems: total } ; let i = index">
          <ng-container *ngIf="engineer?.SearchStatus === 'not_interested' || engineer?.SearchStatus === 'invisible'; else elseTemplate">
            </ng-container>
            <ng-template #elseTemplate>
              <!-- last 3 engineers blury and blocked if user is not member -->
              <ng-container *ngIf="i > engineers.length - 4 && !isMember; else elseTemplate2">
                <div [ngClass]="{'blur': show}">
                  <a class="engineer custom-box-shadow e-h item" [routerLink]="['/engineers/details', engineer.ID]">
                  <div class="flex-shrink-1">
                    <picture>
                      <img
                        [src]="engineer?.Avatar ? engineer?.Avatar : 'assets/empty-avatar.png'" class="rounded-circle profile-image" />
                    </picture>
                  </div>

                  <div class="engineer-info w-100">
                    <div class="engineer-info-header">
                      <h2 class="fs-5 fw-bold">{{ engineer.Tagline }}</h2>
                      <div class="engineer-info-status d-flex align-items-center">
                        <span [ngSwitch]="engineer?.SearchStatus">
                          <span *ngSwitchCase="'actively_looking'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </svg>
                            Actively looking
                          </span>
                          <span *ngSwitchCase="'open'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="gray" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </svg>
                            Open to offers
                          </span>
                        </span>
                      </div>
                    </div>

                    <div class="recently-active rounded-3">
                      <span>Recently active</span>
                    </div>

                    <div class="engineer-info-text">
                      {{ engineer.Bio }}
                    </div>
                  </div>
                </a>
                </div>
              </ng-container>
              <ng-template #elseTemplate2>
                <a class="engineer custom-box-shadow e-h item" [routerLink]="['/engineers/details', engineer.ID]">
                  <div class="flex-shrink-1">
                    <picture>
                      <img
                        [src]="engineer?.Avatar ? engineer?.Avatar : 'assets/empty-avatar.png'" class="rounded-circle profile-image" />
                    </picture>
                  </div>

                  <div class="engineer-info w-100">
                    <div class="engineer-info-header">
                      <h2 class="fs-5 fw-bold">{{ engineer.Tagline }}</h2>
                      <div class="engineer-info-status d-flex align-items-center">
                        <span [ngSwitch]="engineer?.SearchStatus">
                          <span *ngSwitchCase="'actively_looking'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </svg>
                            Actively looking
                          </span>
                          <span *ngSwitchCase="'open'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="gray" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </svg>
                            Open to offers
                          </span>
                        </span>
                      </div>
                    </div>

                    <div class="recently-active rounded-3">
                      <span>Recently active</span>
                    </div>

                    <div class="engineer-info-text">
                      {{ engineer.Bio }}
                    </div>
                  </div>
                </a>
              </ng-template>

            </ng-template>

          </div>
          <div class="blur-block" *ngIf="!isMember && show">
            <div class="blur-block-wrap">
              <h1>Sign up now to see more profiles.
              </h1>
              <p>Gain access to so many more Angular talents.</p>
              <button class="btn btn-success" [routerLink]="[ '/pricing' ]">Start hiring</button>
            </div>
          </div>
        </div>
        <!-- <pagination-controls (pageChange)="page = $event"></pagination-controls> -->
        <pagination-controls *ngIf="isMember" (pageChange)="pageChangeEvent($event)"></pagination-controls>
        <!-- <ul class="pagination">
          <li class="page-item"><a (click)="prevIndex()" class="page-link">Previous</a></li>
          <li class="page-item" *ngFor="let i of pagesCount let n = index">
            <a class="page-link" [ngClass]="status ? 'active' : ''"  (click)="getIndex(n)" >{{n+1}}</a>
            </li>
          <li class="page-item"><a class="page-link" (click)="nextIndex()">Next</a></li>
        </ul> -->

      </main>
    </div>
    <!-- end of engineers -->
  </div>
</div>
